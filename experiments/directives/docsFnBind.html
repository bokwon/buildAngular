<!DOCTYPE html>
<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
		<script type="text/javascript">
			(function(){
				var app = angular.module("app", []);
				app.controller("AppCtrl", function($scope, $timeout) {
					$scope.name = "Tobias";
					$scope.message = "";
					$scope.hideDialog = function(message) {
						$scope.message = message;
						$scope.dialogIsHidden = true;
						$timeout(function(){
							$scope.message = "";
							$scope.dialogIsHidden = false;
						}, 2000);
					};
				});
				
				app.directive("myDialog", function() {
					return {
						restrict: "E",
						// transclude makes the contents of a directive with this option have access to the scope outside of the directive rather than inside.
						transclude: true,
						scope: {
							'close': '&onClose'
						},
						templateUrl: "my-dialog-close.html",
					}
				});
			})();
		</script>
	</head>
	<body ng-app="app">
		<div ng-controller="AppCtrl">
			{{message}}
			<my-dialog ng-hide="dialogIsHidden" on-close="hideDialog(message)">
				Check out the contents, {{name}}!
			</my-dialog>
		</div>
	</body>
</html>